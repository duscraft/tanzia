{{define "content"}}
<main class="flex-grow flex flex-col items-center justify-center py-20 px-6 sm:px-12 text-center max-w-7xl mx-auto">
  <div class="w-full max-w-md bg-surface p-8 sm:p-10 rounded-3xl shadow-xl border border-border">
    <div class="mb-8">
      <h2 class="text-3xl font-extrabold text-textMain tracking-tight mb-2">Créer un compte</h2>
      <p class="text-textMuted">Rejoignez Tanzia et simplifiez votre gestion</p>
    </div>
    
    <div id="signup-error" class="hidden bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 p-4 rounded-xl text-sm font-medium mb-6 text-center animate-pulse">
      <span id="error-message"></span>
    </div>
    
    <form action="/signup" method="POST" class="space-y-5" onsubmit="return validateSignupForm(event)">
      {{if .Redirect}}
      <input type="hidden" name="redirect" value="{{.Redirect}}" />
      {{end}}
      <div class="text-left">
        <label for="email" class="block mb-2 text-sm font-semibold text-textMain">E-mail</label>
        <input type="email" id="email" name="email" required
          class="w-full px-4 py-3 rounded-xl bg-surfaceHighlight border border-border text-textMain placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
          placeholder="votre@email.com" />
      </div>
      <div class="text-left">
        <label for="name" class="block mb-2 text-sm font-semibold text-textMain">Nom d'utilisateur</label>
        <input type="text" id="name" name="name" required
          class="w-full px-4 py-3 rounded-xl bg-surfaceHighlight border border-border text-textMain placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
          placeholder="Votre nom" />
      </div>
      <div class="text-left">
        <label for="password" class="block mb-2 text-sm font-semibold text-textMain">Mot de passe</label>
        <input type="password" id="password" name="password" required
          class="w-full px-4 py-3 rounded-xl bg-surfaceHighlight border border-border text-textMain placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
          placeholder="••••••••" />
        <p class="text-xs text-textMuted mt-2">8 caractères minimum, avec majuscule, minuscule et chiffre.</p>
      </div>
      <div class="text-left">
        <label for="confirm_password" class="block mb-2 text-sm font-semibold text-textMain">Confirmer le mot de passe</label>
        <input type="password" id="confirm_password" name="confirm_password" required
          class="w-full px-4 py-3 rounded-xl bg-surfaceHighlight border border-border text-textMain placeholder-textMuted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
          placeholder="••••••••" />
      </div>
      
      <button type="submit"
        class="w-full bg-primary hover:bg-primaryHover text-white mt-2 py-3.5 rounded-xl font-bold shadow-lg shadow-primary/25 transition-all hover:scale-[1.02] hover:shadow-primary/40 active:scale-[0.98]">
        S'inscrire gratuitement
      </button>
      
      <div class="pt-4 text-sm text-textMuted">
        Déjà un compte ? 
        <a href="/login" class="font-bold text-primary hover:text-primaryHover transition-colors">Se connecter</a>
      </div>
    </form>
  </div>
</main>
<script>
function validateSignupForm(event) {
  var password = document.getElementById('password').value;
  var confirmPassword = document.getElementById('confirm_password').value;
  var errorDiv = document.getElementById('signup-error');
  var errorMessage = document.getElementById('error-message');
  
  if (password !== confirmPassword) {
    event.preventDefault();
    errorMessage.textContent = 'Les mots de passe ne correspondent pas.';
    errorDiv.classList.remove('hidden');
    return false;
  }
  
  if (password.length < 8) {
    event.preventDefault();
    errorMessage.textContent = 'Le mot de passe doit contenir au moins 8 caractères.';
    errorDiv.classList.remove('hidden');
    return false;
  }
  
  if (!/[A-Z]/.test(password)) {
    event.preventDefault();
    errorMessage.textContent = 'Le mot de passe doit contenir au moins une majuscule.';
    errorDiv.classList.remove('hidden');
    return false;
  }
  
  if (!/[a-z]/.test(password)) {
    event.preventDefault();
    errorMessage.textContent = 'Le mot de passe doit contenir au moins une minuscule.';
    errorDiv.classList.remove('hidden');
    return false;
  }
  
  if (!/[0-9]/.test(password)) {
    event.preventDefault();
    errorMessage.textContent = 'Le mot de passe doit contenir au moins un chiffre.';
    errorDiv.classList.remove('hidden');
    return false;
  }
  
  return true;
}
</script>
{{end}}
